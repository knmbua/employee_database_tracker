{"version":3,"file":"query.js","sourceRoot":"","sources":["../../src/lib/query.ts"],"names":[],"mappings":"AAAA,OAAO,MAAM,MAAM,yBAAyB,CAAC;AAE7C,MAAM,CAAC,KAAK,UAAU,iBAAiB;IACnC,MAAM,GAAG,GAAG;;;;;KAKX,CAAC;IACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IACzC,OAAO,IAAI,CAAC;AAChB,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,WAAW;IAC7B,MAAM,GAAG,GAAG;;;;;;;;;KASX,CAAC;IACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IACzC,OAAO,IAAI,CAAC;AAChB,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,eAAe;IACjC,MAAM,GAAG,GAAG;;;;;;;;;;;;;;;;KAgBX,CAAC;IACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IACzC,OAAO,IAAI,CAAC;AAChB,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,cAAc,CAAC,aAAqB,EAAE,OAAe,EAAE,UAAkB,EAAE,SAAiB;IAC9G,MAAM,GAAG,GAAG;;;;KAIX,CAAC;IACF,MAAM,MAAM,GAAG,CAAC,aAAa,EAAE,OAAO,EAAE,UAAU,EAAE,SAAS,CAAC,CAAC;IAC/D,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;IACjD,OAAO,IAAI,CAAC,CAAC,CAAC,CAAC;AACnB,CAAC","sourcesContent":["import client from '../config/connection.js';\r\n\r\nexport async function getAllDepartments() {\r\n    const sql = `\r\n    SELECT \r\n        id,\r\n        name\r\n    FROM department\r\n    `;\r\n    const { rows } = await client.query(sql);\r\n    return rows;\r\n}\r\n\r\nexport async function getAllRoles() {\r\n    const sql = `\r\n    SELECT \r\n        role.id,\r\n        role.title,\r\n        role.salary,\r\n        department.name AS department_name\r\n    FROM role\r\n    JOIN department\r\n        ON role.department_id = department.id\r\n    `;\r\n    const { rows } = await client.query(sql);\r\n    return rows;\r\n}\r\n\r\nexport async function getAllEmployees() {\r\n    const sql = `\r\n    SELECT \r\n        employee.id,\r\n        employee.first_name,\r\n        employee.last_name,\r\n        role.title AS role_title,\r\n        department.name AS department_name,\r\n        role.salary,\r\n        CONCAT(manager.first_name, ' ', manager.last_name) AS manager_name\r\n    FROM employee\r\n    JOIN role\r\n        ON employee.role_id = role.id\r\n    JOIN department\r\n        ON role.department_id = department.id\r\n    LEFT JOIN employee AS manager\r\n        ON employee.manager_id = manager.id\r\n    `;\r\n    const { rows } = await client.query(sql);\r\n    return rows;\r\n}\r\n\r\nexport async function createEmployee(department_id: number, role_id: number, first_name: string, last_name: string) {\r\n    const sql = `\r\n    INSERT INTO employee (department_id, role_id, first_name, last_name)\r\n    VALUES ($1, $2, $3, $4)\r\n    RETURNING *\r\n    `;\r\n    const values = [department_id, role_id, first_name, last_name];\r\n    const { rows } = await client.query(sql, values);\r\n    return rows[0];\r\n}"]}